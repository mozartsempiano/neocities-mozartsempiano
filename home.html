<!DOCTYPE html>
<html lang="pt-br">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="author" content="Mozart Mattar" />

		<title>mozartsempiano</title>
		<link rel="icon" type="image/x-icon" href="/assets/img/favicon.png" />

		<!-- CSS -->
		<link rel="stylesheet" href="/assets/css/style.css" />
		<link rel="stylesheet" href="/assets/css/home.css" />
	</head>

	<body>
		<div id="container" class="fade-in-up">
			<div id="header-outer">
				<!-- <div class="fade-in delay-1" id="gunnm-flag">
          <img src="/assets/img/gunnm-float-v2.png" class="img-clr-main" />
        </div> -->

				<div id="header-expandida" align="center"></div>
				<header id="header-mobile"></header>
			</div>

			<main style="padding-bottom: 28px">
				<div class="linha">
					<div class="box sobre">
						<div class="box-inner">
							<div id="avatar-container">
								<div id="avatar-info">
									<span class="nome">mozart</span>
									<div class="subtitulo">
										<span
											class="typewriter"
											id="typewriter1"
											style="font-size: 1.2em"
											data-phrases='["Designer Gráfico", "Web Designer", "Editor de Vídeo"]'
										></span>
									</div>
									<div>
										<span class="status-indicator bw"></span> Brasil, Terra
									</div>
								</div>
							</div>

							<div class="info-contato">
								<a
									href="mailto:mozartmt@protonmail.com"
									target="_blank"
									title="E-mail"
								>
									<span class="icone envelope"></span>
								</a>
								<a
									href="https://github.com/mozartsempiano"
									target="_blank"
									title="GitHub"
								>
									<span class="icone github"></span>
								</a>
								<a
									href="https://www.instagram.com/mozartsempiano/"
									target="_blank"
									title="Instagram"
								>
									<span class="icone instagram"></span>
								</a>
								<a
									href="https://twitter.com/mozartsempiano"
									target="_blank"
									title="Twitter"
								>
									<span class="icone twitter"></span>
								</a>
								<a
									href="https://bsky.app/profile/mozartsempiano.com"
									target="_blank"
									title="Bluesky"
								>
									<span class="icone bluesky"></span>
								</a>
							</div>

							<div class="info-desc">
								<div class="info-texto">
									<p>
										Entre pixels, linhas de código e madrugadas acordado,
										encontrei no design, na arte e na tecnologia uma forma de
										transformar ideias em experiências. Gosto de misturar
										referências, experimentar linguagens e criar conexões, seja
										numa arte, num vídeo, numa fotografia ou num código.
									</p>
								</div>
								<div class="info-links">
									<a href="/curriculo.html" target="_blank" id="link-curriculo">
										Currículo
									</a>
									<a href="/sobre.html" class="leia-mais"
										>Leia mais<svg
											xmlns="http://www.w3.org/2000/svg"
											fill="#fff"
											viewBox="0 -960 960 960"
										>
											<path
												d="M632.85-437H161.87v-86h470.98L418.61-737.24 480-798.13 798.13-480 480-161.87l-61.39-60.89L632.85-437Z"
											/>
										</svg>
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>

				<div class="linha">
					<div class="box arte">
						<div class="box-inner arte-marquee" style="padding: 0">
							<div class="marquee-track">
								<a href="/portfolio/design/index.html"
									><img
										src="/assets/img/designs/Reviver%20(2023).jpg"
										alt="Minha Arte"
										class="animate-on-scroll dither"
										data-animate="fade-in-up"
								/></a>
								<a href="/portfolio/design/index.html"
									><img
										src="/assets/img/designs/Faded (2023).jpg"
										alt="Minha Arte"
										class="animate-on-scroll dither"
										data-animate="fade-in-up"
								/></a>
								<a href="/portfolio/design/index.html"
									><img
										src="/assets/img/designs/UU%20Poster%20Shows%20(2018).jpg"
										alt="Minha Arte"
										class="animate-on-scroll dither"
										data-animate="fade-in-up"
								/></a>
								<a href="/portfolio/design/index.html"
									><img
										src="/assets/img/designs/Oliver - Block By Block West (2020).jpg"
										alt="Minha Arte"
										class="animate-on-scroll dither"
										data-animate="fade-in-up"
								/></a>
								<a href="/portfolio/arte/index.html"
									><img
										src="/assets/img/arte/fim_do_arco_iris.jpg"
										alt="Minha Arte"
										class="animate-on-scroll dither"
										data-animate="fade-in-up"
								/></a>

								<!-- duplicação para loop contínuo -->
								<a href="/portfolio/design/index.html"
									><img
										src="/assets/img/designs/Reviver%20(2023).jpg"
										alt="Minha Arte"
										class="animate-on-scroll dither"
										data-animate="fade-in-up"
								/></a>
								<a href="/portfolio/design/index.html"
									><img
										src="/assets/img/designs/Faded (2023).jpg"
										alt="Minha Arte"
										class="animate-on-scroll dither"
										data-animate="fade-in-up"
								/></a>
								<a href="/portfolio/design/index.html"
									><img
										src="/assets/img/designs/UU%20Poster%20Shows%20(2018).jpg"
										alt="Minha Arte"
										class="animate-on-scroll dither"
										data-animate="fade-in-up"
								/></a>
								<a href="/portfolio/design/index.html"
									><img
										src="/assets/img/designs/Oliver - Block By Block West (2020).jpg"
										alt="Minha Arte"
										class="animate-on-scroll dither"
										data-animate="fade-in-up"
								/></a>
								<a href="/portfolio/arte/index.html"
									><img
										src="/assets/img/arte/fim_do_arco_iris.jpg"
										alt="Minha Arte"
										class="animate-on-scroll dither"
										data-animate="fade-in-up"
								/></a>
							</div>
						</div>
					</div>
				</div>

				<div class="linha">
					<div class="box status">
						<h1 class="titulo-secao">Última postagem</h1>
						<div class="box-inner"></div>
					</div>
				</div>

				<div class="linha">
					<div class="box statuscafe">
						<div class="box-inner">
							<div id="statuscafe">
								<div id="statuscafe-username"></div>
								<div id="statuscafe-content"></div>
							</div>
							<script src="/assets/js/statuscafe-custom.js" defer></script>
						</div>
					</div>
					<div class="box song-status">
						<div class="box-inner">
							<div
								id="lastfm-status"
								data-user="wrired"
								data-mode="square"
								title="Clique para acessar meu perfil no Last.fm"
							></div>
						</div>
					</div>
				</div>

				<div class="linha">
					<div class="box atualizacoes">
						<h1 class="titulo-secao">Changelog</h1>
						<div class="box-inner" id="updates-container">
							<div id="updates-loading">Carregando...</div>
						</div>
					</div>
				</div>

				<div class="linha">
					<div class="box botao-site">
						<div class="box-inner">
							<div class="button-site">
								<div id="copy-wrapper">
									<img
										src="/assets/img/mozartsempiano-btn-01.gif"
										id="copy-btn"
									/>
								</div>
								<input
									id="copy-input"
									type="text"
									value='<a href="https://mozartsempiano.com/" target="_blank"><img src="https://mozartsempiano.neocities.org/assets/img/mozartsempiano-btn-01.gif"></a>'
								/>
							</div>
						</div>
					</div>
				</div>
			</main>

			<div style="margin-bottom: 88px">
				<div class="banners animate-on-scroll" data-animate="fade-in">
					<img
						src="/assets/img/88x31 banners/handcoded.gif"
						alt="Banner Handcoded"
					/>
					<img
						src="/assets/img/88x31 banners/i-dream-in-html.gif"
						alt="Banner I Dream in HTML"
					/>
					<img
						src="/assets/img/88x31 banners/lain-powered.gif"
						alt="Banner Lain Powered"
					/>
					<img
						src="/assets/img/88x31 banners/button (82).gif"
						alt="Banner Miku Approved"
					/>
					<a href="/2kki.html"
						><img
							src="/assets/img/88x31 banners/yumenikki.gif"
							alt="Banner Yume Nikki"
					/></a>
				</div>
			</div>
		</div>

		<footer></footer>

		<style>
			.arte-marquee:hover .marquee-track {
				animation-play-state: paused;
			}
		</style>

		<script>
			window.addEventListener("load", () => {
				const track = document.querySelector(".marquee-track");
				const items = Array.from(track.querySelectorAll("a"));
				const half = items.length / 2;

				const gap = 8; // mesmo valor do CSS
				let totalWidth = 0;

				for (let i = 0; i < half; i++) {
					totalWidth += items[i].offsetWidth;
				}
				totalWidth += gap * (half - 1);

				track.style.setProperty("--scroll-distance", `-${totalWidth}px`);
			});
		</script>
		<script type="module" src="/assets/js/main.js"></script>
		<script src="/assets/js/typewriter.js"></script>
		<script type="module" src="/assets/js/lastfm-status.js"></script>
		<script src="/assets/js/last-post.js" defer></script>

		<script>
			const img = document.getElementById("copy-wrapper");
			const input = document.getElementById("copy-input");

			img.style.cursor = "pointer";
			img.title = "Clique para copiar";

			const style = document.createElement("style");
			style.textContent = `
        #copy-wrapper { display: inline-block; }
        #copy-btn { display: block; transform-origin: center bottom; }
        #copy-wrapper:hover #copy-btn { animation: bounce 0.5s ease; }
        @keyframes bounce {
          0%   { transform: translateY(0); }
          30%  { transform: translateY(-5px); }
          50%  { transform: translateY(0); }
          70%  { transform: translateY(-2px); }
          100% { transform: translateY(0); }
        }
      `;
			document.head.appendChild(style);

			img.addEventListener("click", () => {
				navigator.clipboard
					.writeText(input.value)
					.then(() => console.log("Copiado!"))
					.catch((err) => console.error("Erro ao copiar:", err));
			});
		</script>
		<script>
			// Adiciona ícone de "novo" ao lado do registro mais recente, caso esteja dentro de x dias.
			document.addEventListener("DOMContentLoaded", function () {
				const strong = document.querySelector(".ultimo strong");
				if (strong) {
					// Extrai a data no formato DD/MM/YY do texto do <strong>
					const texto = strong.textContent.trim();
					const match = texto.match(/(\d{2})\/(\d{2})\/(\d{2})/);
					const periodo = 14; // Quantos dias
					if (match) {
						// Monta a data no formato YYYY-MM-DD
						const ano = "20" + match[3];
						const mes = match[2];
						const dia = match[1];
						const dataRegistro = new Date(`${ano}-${mes}-${dia}`);
						const hoje = new Date();
						// Zera horas para comparar só datas
						dataRegistro.setHours(0, 0, 0, 0);
						hoje.setHours(0, 0, 0, 0);
						const diffDias = (hoje - dataRegistro) / (1000 * 60 * 60 * 24);
						if (diffDias <= periodo) {
							// Adiciona o span .novo-icone ao lado da data, se não existir ainda
							if (!strong.querySelector(".novo-icone")) {
								const novoIcone = document.createElement("span");
								novoIcone.className = "novo-icone img-clr-main";
								strong.appendChild(document.createTextNode(" ")); // espaço
								strong.appendChild(novoIcone);
							}
						}
					}
				}
			});
		</script>
		<script>
			(function () {
				const container = document.getElementById("updates-container");
				const loading = document.getElementById("updates-loading");

				if (!container) return;

				fetch("/assets/json/updates.json", { cache: "no-store" })
					.then((res) => {
						if (!res.ok) throw new Error("Falha ao carregar updates.json");
						return res.json();
					})
					.then((data) => {
						if (!Array.isArray(data) || data.length === 0) {
							container.innerHTML =
								"<div>Nenhuma atualização encontrada.</div>";
							return;
						}

						// Ordena por data (ISO) descendente
						data.sort((a, b) => (a.date < b.date ? 1 : -1));

						// Apenas a última atualização
						const entry = data[0];
						const date = entry.date; // YYYY-MM-DD
						const parts = date.split("-");
						const formatted = `${parts[2]}/${parts[1]}/${parts[0].slice(2)}`;

						const frag = document.createDocumentFragment();

						const span = document.createElement("span");
						span.className = "ultimo";
						span.innerHTML = `<strong>${formatted}</strong>`;
						frag.appendChild(span);

						const ul = document.createElement("ul");
						entry.items.forEach((item) => {
							const li = document.createElement("li");
							li.innerHTML = item;
							ul.appendChild(li);
						});
						frag.appendChild(ul);

						// Link para changelog completo
						const changelogLink = document.createElement("a");
						changelogLink.href = "/changelog.html";
						changelogLink.textContent = "[Veja o changelog completo]";
						changelogLink.style.display = "block";
						changelogLink.style.marginTop = "12px";
						frag.appendChild(changelogLink);

						container.innerHTML = "";
						container.appendChild(frag);

						// Run the 'novo' indicator script on the freshly injected DOM
						try {
							const strong = container.querySelector(".ultimo strong");
							if (strong) {
								const texto = strong.textContent.trim();
								const match = texto.match(/(\d{2})\/(\d{2})\/(\d{2})/);
								const periodo = 14;
								if (match) {
									const ano = "20" + match[3];
									const mes = match[2];
									const dia = match[1];
									const dataRegistro = new Date(`${ano}-${mes}-${dia}`);
									const hoje = new Date();
									dataRegistro.setHours(0, 0, 0, 0);
									hoje.setHours(0, 0, 0, 0);
									const diffDias =
										(hoje - dataRegistro) / (1000 * 60 * 60 * 24);
									if (diffDias <= periodo) {
										if (!strong.querySelector(".novo-icone")) {
											const novoIcone = document.createElement("span");
											novoIcone.className = "novo-icone img-clr-main";
											strong.appendChild(document.createTextNode(" "));
											strong.appendChild(novoIcone);
										}
									}
								}
							}
						} catch (e) {
							/* ignore */
						}
					})
					.catch((err) => {
						console.error(err);
						if (loading) loading.textContent = "Erro ao carregar atualizações.";
						else
							container.innerHTML = "<div>Erro ao carregar atualizações.</div>";
					});
			})();
		</script>
	</body>
</html>
